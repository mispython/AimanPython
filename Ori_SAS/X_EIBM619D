OPTIONS SORTDEV=3390 YEARCUTOFF=1950 NOCENTER NONUMBER NODATE;
%INC PGM(BRANCHCD,PBBDPFMT);
DATA REPTDATE;
  SET BNM.REPTDATE;
  MM=MONTH(REPTDATE);
  CALL SYMPUT('REPTMON',PUT(MM,Z2.));
  CALL SYMPUT('SDATE',PUT(REPTDATE,Z5.));
  CALL SYMPUT('RDATE',PUT(REPTDATE,DDMMYY8.));
RUN;
*;
DATA SDESC;
   SET LOAN.SDESC;
   CALL SYMPUT('SDESC',PUT(SDESC,$36.));
RUN;
*;
DATA BRHFILE;
  INFILE BRHFILE;
  INPUT @2 BRANCH 3. @6 BRCHCD $3.;
PROC SORT; BY BRANCH;
*;
DATA SA;
  SET BNM.SAVING;
  AMTIND=PUT(PRODUCT,SADENOM.);
DATA FD;
  SET BNM.FD;
  AMTIND=PUT(PRODUCT,FDDENOM.);
DATA CA;
  SET BNM.CURRENT;
  AMTIND=PUT(PRODUCT,CADENOM.);
*;
DATA DEP;
  SET SA FD CA;
  IF  OPENIND NOT IN ('B','C','P');
*;
PROC SORT DATA=DEP OUT=P619; BY BRANCH AMTIND PRODUCT;
*;
PROC SUMMARY DATA=P619 NWAY;
CLASS BRANCH AMTIND PRODUCT;
VAR   CURBAL; OUTPUT OUT=P619O (DROP=_TYPE_) SUM=;
*;
DATA P619;
  MERGE BRHFILE P619O(IN=A); BY BRANCH;
  IF A;
  ACCTS=_FREQ_;
                      CATEGORY='ISLAMIC     ';
  IF AMTIND='D'  THEN CATEGORY='CONVENTIONAL';
  BRCX=PUT(BRANCH,Z3.)||'-'||BRCHCD;
*;
PROC SORT; BY BRCX CATEGORY PRODUCT;
TITLE  &SDESC  ' REPORT ID: EIBM619D';
TITLE2 'NUMBER OF DEPOSIT ACCOUNTS BY PRODUCT @ ' &RDATE;
PROC REPORT DATA=P619 NOWD HEADSKIP HEADLINE;
COLUMN BRCX CATEGORY PRODUCT ACCTS;
DEFINE BRCX      /  GROUP    'BR-CODE'          FORMAT=$8.;
DEFINE CATEGORY  /  GROUP    'CATEGORY'         FORMAT=$12.;
DEFINE PRODUCT   /  DISPLAY  'PRODUCT'          FORMAT=7.;
DEFINE ACCTS     /  SUM      'NUMBER OF ACCTS'  FORMAT=12.;
COMPUTE AFTER CATEGORY;
LINE @013 35*'-';
LINE @013 'SUB-TOTAL '
     @032  ACCTS.SUM  COMMA16.;
ENDCOMP;
BREAK AFTER BRCX /;
COMPUTE AFTER BRCX;
LINE @013 'TOTAL BY BRANCH '
     @032 ACCTS.SUM   COMMA16.;
LINE @013 35*'-';
ENDCOMP;
